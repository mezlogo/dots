#!/usr/bin/env bash

SNIPPET_REPO="$HOME/exo/snippets"
SINPPET_BUILD_SCRIPT="$HOME/exo/modules/python/build_snippets.py"

function fzf_snippet {
  local selected_snippet
  selected_snippet=$(
    python $SINPPET_BUILD_SCRIPT $SNIPPET_REPO |
      fzf --preview 'cat --style=numbers --color=always --line-range :500 ~/exo/snippets/{}'
  )
  if [ -n "$selected_snippet" ]; then
    cat "$SNIPPET_REPO/$selected_snippet" | sed "s/^export\s//g" | xsel -b
  fi
}

fzf_snippet
